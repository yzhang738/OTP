(function(b){var a=b.telerik;a.combobox=function(f,j){b.extend(this,j);var d=b(f);this.element=f;this.$element=d;this.loader=new a.list.loader(this);this.trigger=new a.list.trigger(this);var l=d.find("> .t-dropdown-wrap > .t-select");var o=b.browser.msie?"paste":"input";var g=this.$text=d.find("> .t-dropdown-wrap > .t-input").attr("autocomplete","off").bind(o,b.proxy(function(q){var s=q.target.value;if(b.browser.msie){var r=f.document.selection.createRange().text;var p=window.clipboardData.getData("Text");if(r&&r.length>0){s=s.replace(r,p)}else{s+=p}}this.$input.val(s);k(this)},this));var h=b.browser.msie?"propertychange":"DOMAttrModified";var i=this.$input=this.$element.find("input:last").bind(h,function(p){var r="class",q=i.attr(r);if(q!=g.attr(r)){g.attr(r,q).addClass("t-input")}});if(!i.attr("disabled")){l.bind("click",b.proxy(e,this))}this.filtering=new a.list.filtering(this);this.filtering.autoFill=function(r,s){if(r.autoFill&&(r.lastKeyCode!=8&&r.lastKeyCode!=46)){var v=r.$text[0];var u=a.caretPos(v);var t=v.value.substring(0,u);var q=s.toLowerCase().indexOf(t.toLowerCase());if(q!=-1){var p=s.substring(q+t.length);v.value=t+p;a.list.selection(v,u,u+p.length)}}};this.dropDown=new a.dropDown({attr:this.dropDownAttr,effects:this.effects,onOpen:b.proxy(function(){var s=this.data;var r=this.dropDown;if(s.length==0){return}var p=this.$text.val();var q=this.selectedIndex;if(q!=-1&&this.isFiltered){if(p==s[q].Text){this.filteredDataIndexes=[];r.onItemCreate=null;r.dataBind(this.data);this.select(r.$items[q])}else{this.filters[this.filter](this,this.data,p)}this.isFiltered=false}},this),onClick:b.proxy(function(p){this.select(p.item);this.trigger.change();this.trigger.close()},this)});this.dropDown.$element.css("direction",d.closest(".t-rtl").length?"rtl":"");this.enable=function(){d.removeClass("t-state-disabled").find(".t-input").removeAttr("disabled");l.bind("click",b.proxy(e,this))};this.disable=function(){d.addClass("t-state-disabled").find(".t-input").attr("disabled","disabled");l.unbind("click")};this.fill=function(t){function w(B){var C=B.selectedValue||B.value();if(C){B.value(C);return}var A=p.$items;var D=B.index;var y=A.filter(".t-state-selected");var x=y.length;var z=D!=-1&&D<A.length?A[D]:x>0?y[x-1]:null;if(z){B.select(z)}else{B.selectedIndex=-1;if(B.highlightFirst){B.highlight(A[0])}}}var u=this.loader;var p=this.dropDown;var v=this.minChars;var r=this.text();var q=r.length;if(!p.$items&&!u.ajaxError){if(u.isAjax()&&q>=v){var s={};s[this.queryString.text]=r;u.ajaxRequest(function(x){this.dataBind(x,true);w(this);a.trigger(this.element,"dataBound");this.trigger.change();if(t){t()}},{data:s})}else{this.dataBind(this.data,true);w(this);if(t){t()}}}};this.reload=function(){this.dropDown.$items=null;this.fill()};this.select=function(p){var q=this.highlight(p);if(q==-1){return q}var r=this.filteredDataIndexes;this.selectedIndex=(r&&r.length)>0?r[q]:q;a.list.updateTextAndValue(this,b(this.dropDown.$items[q]).text(),this.data[this.selectedIndex].Value)};this.text=function(){return this.$text.val.apply(this.$text,arguments)};this.value=function(){if(arguments.length){var p=arguments[0];var q=this.select(function(r){return p==(r.Value||r.Text)});if(q==-1){this.selectedIndex=q;this.$input.val(p);this.text(p)}this.previousValue=this.$input.val()}else{return this.$input.val()}};a.list.common.call(this);a.list.filters.call(this);a.list.initialize.call(this);b(document.documentElement).bind("mousedown",b.proxy(function(p){var r=this.dropDown.$element;var q=r&&r.parent().length>0;if(b.contains(this.element,p.target)||(q&&b.contains(r.parent()[0],p.target))){return}if(this._textChanged){this._textChanged=false;var s=c(this.data,this.$text.val());if(s){this.text(s.Text);this.$input.val(s.Value||s.Text)}}this.trigger.change();this.trigger.close()},this));this.$text.bind({change:b.proxy(function(p){p.stopPropagation()},this),keydown:b.proxy(m,this),keypress:b.proxy(n,this),focus:b.proxy(function(p){var r=this.trigger;var s=this.dropDown;if(!s.$items){this.fill(r.open)}else{r.open()}var q=this.$text;a.list.selection(q[0],0,q.val().length)},this)});function e(p){this.loader.ajaxError=false;if(!this.dropDown.isOpened()){this.$text[0].focus()}else{this.trigger.close()}}function k(p){clearTimeout(p.timeout);p.timeout=setTimeout(function(){p.filtering.filter(p)},p.delay)}function m(u){var t=this.trigger;var r=this.dropDown;var x=u.keyCode||u.which;this.lastKeyCode=x;if(u.altKey&&x==38){t.close();return}if(u.altKey&&x==40){t.open();return}if(!u.shiftKey&&(x==38||x==40)){u.preventDefault();if(!r.$items){this.fill()}var z=r.$items;var y=z.filter(".t-state-selected:first");var q=y.length==0||z.length==1?z.first():(x==38)?y.prev():(x==40)?y.next():[];if(q.length){var s=q[0];this.select(s);r.scrollTo(s);if(!r.isOpened()){t.change()}}}if(x==8||x==46){var v=this.$text;if(v.val()!=""){k(this)}setTimeout(b.proxy(function(){if(v.val()==""){this.selectedIndex=-1;this.$input.val("")}else{this.$input.val(this.$text.val())}},this),0)}if(x==13){if(r.isOpened()){u.preventDefault()}var p=r.$items.filter(".t-state-selected:first");if(p.length>0){this.select(p[0])}else{this.$input.val(this.$text.val())}t.change();t.close();a.list.moveToEnd(this.$text[0])}if(x==27||x==9){var w=c(this.data,this.$text.val());if(w){this.text(w.Text);this.$input.val(w.Value||w.Text)}t.change();t.close();if(x==27){this.$text.blur()}}}function n(p){this._textChanged=true;var q=p.keyCode||p.charCode;if(q==0||b.inArray(q,a.list.keycodes)!=-1||p.ctrlKey){return true}setTimeout(b.proxy(function(){this.$input.val(this.$text.val())},this),0);k(this)}};function c(d,j){if(!j){return}j=j.toLowerCase();if(d){for(var h=0,e=d.length;h<e;h++){var f=d[h],g=f.Text;if(g.toLowerCase()==j){return f}}}}b.fn.tComboBox=function(d){return a.create(this,{name:"tComboBox",init:function(f,e){return new a.combobox(f,e)},options:d})};b.fn.tComboBox.defaults={encoded:true,effects:a.fx.slide.defaults(),index:-1,autoFill:true,highlightFirst:true,filter:0,delay:200,minChars:0,cache:true,queryString:{text:"text"}}})(jQuery);